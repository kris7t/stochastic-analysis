
%
% General
%

\let\Pr\relax
\DeclareMathOperator{\Pr}{\mathbb{P}}
\DeclareMathOperator{\Ex}{\mathbb{E}}
\DeclareMathOperator{\diag}{diag}

\newcommand*{\dd}{\mathrm{d}}
\newcommand*{\T}{\mathrm{T}}
\newcommand*{\vecarrow}{}\let\vecarrow\vec
\renewcommand*{\vec}[1]{\bm{\mathrm{#1}}}
\newcommand*{\krtimes}{}\let\krtimes\otimes

\newcommand*{\mathabbrev}[1]{\textit{\textls{#1}}}

%
% Figures
%

\tikzset{
  tdk highlight/.style={
    fill=white,
    drop shadow={color=black,opacity=0.12,shadow xshift=2pt, shadow yshift=-2pt}
  }
}

%
% Numbers
%

\newcommand*{\RR}{\mathbb{R}} % Reals
\newcommand*{\RRpos}{\RR^{+}} % Positiver reals
\newcommand*{\QQ}{\mathbb{Q}} % Rationals
\newcommand*{\ZZ}{\mathbb{Z}} % Whole numbers
\newcommand*{\NN}{\mathbb{N}} % Naturals
\newcommand*{\NNpos}{\NN^{+}} % Positive whole numbers

%
% Petri nets
%

\newcommand*{\PN}{\mathabbrev{PN}}
\newcommand*{\SPN}{\mathabbrev{SPN}}
\newcommand*{\PNI}{\PN_I}
\newcommand*{\RS}{\mathabbrev{RS}}
\newcommand*{\inarc}{\prescript{\bullet}{}}
\newcommand*{\outarc}[1]{#1^\bullet}
\newcommand*{\inharc}{\prescript{\circ}{}}
\newcommand*{\outharc}[1]{#1^\circ}
\newcommand*{\tranto}[1]{\mathbin{[#1\rangle}}
\newcommand*{\reachto}{}\let\reachto\leadsto
\newcommand*{\token}{\ensuremath{\bullet}}

\tikzset{
  petri net place/.style={
    inner sep=0pt,minimum size=0.65cm,draw,circle,tdk highlight
  },
  petri net transition/.style={
    inner sep=0pt,minimum width=0.2cm,minimum height=0.65cm,draw,tdk highlight
  }
}

\newcommand*{\SRN}{\mathabbrev{SRN}}
\newcommand*{\rateReward}{\mathit{rr}}
\newcommand*{\impulseReward}{\mathit{ir}}

%
% Markov chains
%

\newcommand*{\CTMC}{\textls{CTMC}}

%
% Running example
%

\newcommand*{\runningExamplePetriNet}{%
\matrix [column sep=0.65cm,row sep=0.5cm,label distance=0cm,ampersand replacement=\&] {
\node [petri net place,label={\strut$p_{W_1}$}] (W1) {};
\& \node [petri net transition,label={\strut$t_{a_1}$}] (a1) {};
\& \node [petri net place,label={\strut$p_{S_1}$}] (S1) {};
\& \node [petri net transition,label={\strut$t_{d_1}$}] (d1) {};
\& \node [petri net place,label={\strut$p_{C_1}$}] (C1) {\token};
\& \node [petri net transition,label={\strut$t_{r_1}$}] (r1) {}; \\
\& \& \node [petri net place] (S) {\token}; \& \& \& \\
\node [petri net place,label={-90:\strut$p_{W_2}$}] (W2) {};
\& \node [petri net transition,label={-90:\strut$t_{a_2}$}] (a2) {};
\& \node [petri net place,label={-90:\strut$p_{S_2}$}] (S2) {};
\& \node [petri net transition,label={-90:\strut$t_{d_2}$}] (d2) {};
\& \node [petri net place,label={-90:\strut$p_{C_2}$}] (C2) {\token};
\& \node [petri net transition,label={-90:\strut$t_{r_2}$}] (r2) {}; \\
};
\node [left=0cm of S] {$p_S$};
\draw [-{Latex}] (W1) edge (a1) (S) edge (a1) (a1) edge (S1)
(S1) edge (d1) (d1) edge (S) (d1) edge (C1) (C1) edge (r1)
(W2) edge (a2) (S) edge (a2) (a2) edge (S2)
(S2) edge (d2) (d2) edge (S) (d2) edge (C2) (C2) edge (r2);
\draw [-{Latex},rounded corners] (r1.east) -| ++(0.65cm,1.2cm) -|
($(W1.west)+(-0.65cm,0)$) -- (W1);
\draw [-{Latex},rounded corners] (r2.east) -| ++(0.65cm,-1.2cm) -|
($(W2.west)+(-0.65cm,0)$) -- (W2);
}